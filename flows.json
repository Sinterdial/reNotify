[
    {
        "id": "384abcadb0af9821",
        "type": "tab",
        "label": "è½¬å‘å°é—­çš„Webhookè¯·æ±‚åˆ°ntfy",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "958c190e9afc8971",
        "type": "http in",
        "z": "384abcadb0af9821",
        "name": "æ¥å—å…¶ä»–åº”ç”¨åŒ…è£…çš„é€šçŸ¥",
        "url": "/renotify",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 110,
        "y": 920,
        "wires": [
            [
                "eabc066bdd78c542",
                "1c6d068f286bd40d"
            ]
        ]
    },
    {
        "id": "c8eb98633434d655",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "ä¸´æ—¶å·¥æ¶ˆæ¯è½¬å‘åˆ°nfty",
        "method": "POST",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "4"
            },
            {
                "keyType": "other",
                "keyValue": "Icon",
                "valueType": "other",
                "valueValue": "https://keylol.com/template/steamcn_metro/src/img/common/icon_with_text_256h.png"
            }
        ],
        "x": 2300,
        "y": 120,
        "wires": [
            [
                "217b364ca74db0e3"
            ]
        ],
        "inputLabels": [
            "æ¥æºä¸ºRSSPush"
        ],
        "info": "æ¶ˆæ¯æ¯”è¾ƒç®€å•ï¼Œç”¨Webhookæ–¹å¼é‡æ–°è½¬å‘åˆ°ntfy"
    },
    {
        "id": "72c8573da42fea06",
        "type": "switch",
        "z": "384abcadb0af9821",
        "d": true,
        "name": "åˆ¤æ–­æ˜¯ä½•ç§RSSPushä¸»é¢˜",
        "property": "payload.task_title",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "å…¶ä¹",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "PTé£å‘æ——",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "ç›´æ’­é—´å¼€æ’­",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1510,
        "y": 180,
        "wires": [
            [
                "eea1c28d3003eda0"
            ],
            [
                "f38f4b7a223a26c0"
            ],
            [
                "658bd69ccf6853b5"
            ],
            []
        ]
    },
    {
        "id": "eabc066bdd78c542",
        "type": "debug",
        "z": "384abcadb0af9821",
        "name": "è§‚å¯Ÿä¼ å…¥æ•°æ®ç‰¹å¾",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 350,
        "y": 760,
        "wires": []
    },
    {
        "id": "7526ce23d51cdf2a",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "æ— åŒ¹é…çš„ntfyè®¢é˜…ä¸»é¢˜",
        "statusCode": "400",
        "headers": {
            "content-type": "application/json"
        },
        "x": 1500,
        "y": 1520,
        "wires": []
    },
    {
        "id": "fc4020522ee9b4f9",
        "type": "switch",
        "z": "384abcadb0af9821",
        "name": "åˆ¤æ–­MPäº‹ä»¶ç±»å‹",
        "property": "payload.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "subscribe.added",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "download.added",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "subscribe.complete",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "transfer.complete",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 1480,
        "y": 920,
        "wires": [
            [
                "1e1445ebae1fe53a"
            ],
            [
                "3e8b67037dc3a327",
                "3c7af06b72fec21e"
            ],
            [
                "62098ff47103bd51"
            ],
            [
                "55c8ef842e4a4cd2"
            ],
            [
                "376d93f341066c0b"
            ]
        ],
        "outputLabels": [
            "è®¢é˜…å·²æ·»åŠ ",
            "ä¸‹è½½å·²æ·»åŠ ",
            "è®¢é˜…å·²å®Œæˆ",
            "èµ„æºå·²å…¥åº“",
            "æ— åŒ¹é…çš„MPäº‹ä»¶ç±»å‹"
        ]
    },
    {
        "id": "fe3e3f47e53c7405",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "å°†æ‰“åŒ…å¥½çš„JSONå¯¹è±¡å‘é€ç»™nfty",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            }
        ],
        "x": 2330,
        "y": 560,
        "wires": [
            [
                "f3222f36d1c0363e"
            ]
        ],
        "info": "å°†é€šçŸ¥é‡æ–°æ‰“åŒ…è½¬å‘åˆ°ntfyçš„MoviePiloté¢‘é“\r\nè¿™é‡Œæ³¨æ„å¦‚æœè¦ç”¨JSONçš„è¯è½¬å‘URLé‡Œä¸èƒ½å¸¦è®¢é˜…ä¸»é¢˜"
    },
    {
        "id": "1e1445ebae1fe53a",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…è®¢é˜…å·²æ·»åŠ é€šçŸ¥",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "MoviePilot",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "payload.data.mediainfo.title_year & (payload.data.context.meta_info.season_episode != '' ? ' ' : '' ) & ' å·²æ·»åŠ è®¢é˜…'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "'æ¥è‡ªç”¨æˆ·ï¼š' & payload.data.username & '\\n' & \t'è¯„åˆ†ï¼š' & payload.data.mediainfo.vote_average & '\\n' &\t'æµè¡Œåº¦: ' & $round(payload.data.mediainfo.popularity, 2) & '\\n' &\t'ç±»åˆ«ï¼š' & payload.data.mediainfo.category\t",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "payload.data.mediainfo.homepage = '' ? \t[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨MPä¸­æŸ¥çœ‹\",\t        \"url\": (payload.data.mediainfo.type = \"ç”µå½±\" ? \"https://mp.181691.xyz:4584/#/subscribe/movie\" : \"https://mp.181691.xyz:4584/#/subscribe/tv\")\t    },\t    \t    {\t        \"action\": \"view\",\t        \"label\": \"TMDB\",\t        \"url\": payload.data.mediainfo.detail_link\t    }\t]\t:\t[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨MPä¸­æŸ¥çœ‹\",\t        \"url\": (payload.data.mediainfo.type = \"ç”µå½±\" ? \"https://mp.181691.xyz:4584/#/subscribe/movie\" : \"https://mp.181691.xyz:4584/#/subscribe/tv\")\t    },\t\t    {\t        \"action\": \"view\",\t        \"label\": \"TMDB\",\t        \"url\": payload.data.mediainfo.detail_link\t    },\t    \t    {\t        \"action\": \"view\",\t        \"label\": \"å®˜ç½‘\",\t        \"url\": payload.data.mediainfo.homepage\t    }\t]",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "payload.data.mediainfo.logo_path != null ? payload.data.mediainfo.logo_path : \"https://chevereto.181691.xyz:4584/images/2024/12/26/1000087726.png\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.attach",
                "pt": "msg",
                "to": "payload.data.mediainfo.backdrop_path",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload.data",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.type",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.time",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1930,
        "y": 560,
        "wires": [
            [
                "fe3e3f47e53c7405"
            ]
        ],
        "info": "è¿™é‡Œæµ‹è¯•æ—¶ä¸èƒ½åŠ payload.\r\nä½†æ˜¯å®é™…ä½¿ç”¨æ—¶éœ€è¦åŠ ï¼Œå› ä¸ºå®é™…ä¼ å…¥çš„msgæ‰æ˜¯æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯msg.payload\r\né•¿çš„é€»è¾‘è¡¨è¾¾å¼ä¹‹é—´ä¹Ÿéœ€è¦ç”¨&è¿æ¥\r\n\r\nactionä¸­ç”¨åˆ°äº†åˆ¤æ–­ï¼Œåˆ¤å®šè¯¥å½±è§†æ˜¯å¦å­˜åœ¨å®˜ç½‘ï¼Œå¦‚æœæœ‰çš„è¯åŠ ä¸Šç›¸åº”çš„æŒ‰é’®"
    },
    {
        "id": "9780f7e6ef8e6642",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 560,
        "wires": []
    },
    {
        "id": "58673e9845f4a0ef",
        "type": "function",
        "z": "384abcadb0af9821",
        "name": "æ ¹æ®ä¼ å…¥å†…å®¹åˆ†å‘é€šçŸ¥",
        "func": "// // è¾“å‡º1ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºPushRSSé€šçŸ¥\n// if ( \"task_title\" in msg.payload ){\n//     return [msg, null, null, null, null];\n// }\n// åˆ¤æ–­æ˜¯å¦ä¸ºMiniflux Webhooké€šçŸ¥\nif ( \"feed\" in msg.payload ){\n    return [msg, null, null, null, null];\n}\n// è¾“å‡º2ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºMoviePiloté€šçŸ¥\nelse if( \"data\" in msg.payload){\n    if (\"mediainfo\" in msg.payload.data || \"context\" in msg.payload.data){\n        return [null, msg, null, null, null];\n    }\n    else{        \n    }\n}\n// è¾“å‡º3ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºDocker Image Update Notifieré€šçŸ¥\nelse if( \"diun_version\" in msg.payload ){\n    return [null, null, msg, null, null];\n}\n// è¾“å‡º4ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºWallosé€šçŸ¥\nelse if( \"days_until\" in msg.payload ){\n    return [null, null, null, msg, null];\n}\n// è¾“å‡ºnï¼šæ— åŒ¹é…æ¥æºï¼Œå“åº”ç›¸åº”ä¿¡æ¯\nelse{\n    msg.payload = context.get(\"error\").payload;\n    return [null, null, null, null, msg];\n}",
        "outputs": 5,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// éƒ¨ç½²èŠ‚ç‚¹åï¼Œæ­¤å¤„æ·»åŠ çš„ä»£ç å°†è¿è¡Œä¸€æ¬¡ã€‚ \n// å®šä¹‰æ ¼å¼åŒ–æ—¶é—´æˆ³å‡½æ•°ï¼Œå–è‡ªChatGPT\nglobal.set(\"formatTimestamp\", function (timestamp) {\n    const date = new Date(timestamp);\n\n    // è·å–å„éƒ¨åˆ†æ—¶é—´\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // æœˆä»½ä» 0 å¼€å§‹ï¼Œéœ€è¦åŠ  1\n    const day = String(date.getDate()).padStart(2, '0');\n    const hour = String(date.getHours()).padStart(2, '0'); // 24 å°æ—¶åˆ¶\n    const minute = String(date.getMinutes()).padStart(2, '0');\n    const second = String(date.getSeconds()).padStart(2, '0');\n\n    // æ ¼å¼åŒ–ä¸º \"æŸå¹´æŸæœˆæŸæ—¥æŸæ—¶æŸåˆ†æŸç§’\" çš„å½¢å¼\n    return `${year} å¹´ ${month} æœˆ ${day} æ—¥ ${hour} æ—¶ ${minute} åˆ† ${second} ç§’`;\n});\n// console.log(formatTimestampWithPadding(timestamp));\n// è¾“å‡ºï¼š2025å¹´01æœˆ19æ—¥06æ—¶53åˆ†54ç§’\n\n\n// éƒ¨ç½²èŠ‚ç‚¹åï¼Œæ­¤å¤„æ·»åŠ çš„ä»£ç å°†è¿è¡Œä¸€æ¬¡ã€‚ \nvar newMsg = {\n    payload: {\n        title: \"æ— åŒ¹é…é€šçŸ¥ç±»å‹\",\n        type: \"é€šçŸ¥è½¬å‘å¤±è´¥\",\n        sender: \"æœªçŸ¥\",\n        destination: \"Self-Hosted Ntfy\"\n    }\n};\n\ncontext.set(\"error\", newMsg);",
        "finalize": "",
        "libs": [],
        "x": 1200,
        "y": 920,
        "wires": [
            [
                "72c8573da42fea06",
                "340f4885275ca577"
            ],
            [
                "fc4020522ee9b4f9"
            ],
            [
                "caefea99b7251a3b",
                "d88076e4d7713c05"
            ],
            [
                "de24cbccc28be417"
            ],
            [
                "7526ce23d51cdf2a"
            ]
        ],
        "inputLabels": [
            "ä¼ å…¥æ•°æ®"
        ],
        "outputLabels": [
            "RSSPush",
            "MoviePilot",
            "DockerImageUpdateNotify",
            "Wallos",
            "NoMatched"
        ],
        "icon": "font-awesome/fa-arrows-alt"
    },
    {
        "id": "66eb0c795259065a",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "æ— åŒ¹é…çš„MPäº‹ä»¶ç±»å‹",
        "statusCode": "400",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2300,
        "y": 1060,
        "wires": []
    },
    {
        "id": "217b364ca74db0e3",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"æˆåŠŸå¤„ç†\",\"type\":\"å…¶ä¹ä¸´æ—¶å·¥æ¶ˆæ¯\",\"sender\":\"RSSPush\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 120,
        "wires": [
            [
                "428e1588e07eb094"
            ]
        ]
    },
    {
        "id": "f3222f36d1c0363e",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"è®¢é˜…æ·»åŠ é€šçŸ¥å‘é€æˆåŠŸ\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"MP Webhook\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 560,
        "wires": [
            [
                "9780f7e6ef8e6642"
            ]
        ]
    },
    {
        "id": "428e1588e07eb094",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 120,
        "wires": []
    },
    {
        "id": "caefea99b7251a3b",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…æ¶ˆæ¯",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "Diun",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "'8100ç¾¤æ™–ä¸Šçš„Docker: ' & $reverse($split(payload.image, \"/\"))[1] & '/' & $substringBefore($reverse($split(payload.image, \"/\"))[0], ':') & 'æœ‰æ–°ç‰ˆæœ¬å‘å¸ƒ'\t",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "'### ' & '**' & 'å‘å¸ƒå¹³å°ï¼š' & payload.provider & '**' & '\\n' &\t'### ' & 'æ˜ åƒå…¨ç§°ï¼š' & payload.image & '\\n' &\t'#### ' & '**' & 'æ›´æ–°æ—¶é—´ï¼š' & $fromMillis($toMillis(payload.created), '[Y0001]/[M01]/[D01] [h#1]:[m01]') & '**' & '\\n' &\t'æ”¯æŒæ¶æ„ï¼š' & '`' & payload.platform & '`' & '\\n' &\t'å”¯ä¸€æ ‡è¯†ï¼š' & '`' & payload.digest & '`' & '\\n' &\t'æŠ“å–åˆ—è¡¨ï¼š' & '`' & payload.mime_type & '`' & '\\n' &\t'Diunç‰ˆæœ¬ï¼š' & '`' & payload.diun_version & '`'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "$contains(payload.image, \"docker.io\") ? \t[\t    {\t        \"action\": \"view\",\t        \"label\": \"Docker Hub\",\t        \"url\": payload.hub_link\t    }\t]\t:\t[\t    {\t    }\t    \t    {\t    }\t]",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "$contains(payload.image, \"docker.io\") ? \t'http://192.168.5.8:8855/images/2024/12/21/Moby-logo.png'\t:\t''",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload.diun_version",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.hostname",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.status",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.provider",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.image",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.hub_llink",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.mime_type",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.digest",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.created",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.platform",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.metadata",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 1160,
        "wires": [
            [
                "e30c774c20dc50e4"
            ]
        ],
        "inputLabels": [
            "æ¥è‡ªdiunçš„æ¶ˆæ¯"
        ],
        "info": "è¿™é‡Œæµ‹è¯•æ—¶ä¸èƒ½åŠ payload.\r\nä½†æ˜¯å®é™…ä½¿ç”¨æ—¶éœ€è¦åŠ ï¼Œå› ä¸ºå®é™…ä¼ å…¥çš„msgæ‰æ˜¯æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯msg.payload\r\né•¿çš„é€»è¾‘è¡¨è¾¾å¼ä¹‹é—´ä¹Ÿéœ€è¦ç”¨&è¿æ¥\r\n\r\nactionä¸­ç”¨åˆ°äº†åˆ¤æ–­ï¼Œåˆ¤å®šè¯¥å½±è§†æ˜¯å¦å­˜åœ¨å®˜ç½‘ï¼Œå¦‚æœæœ‰çš„è¯åŠ ä¸Šç›¸åº”çš„æŒ‰é’®"
    },
    {
        "id": "e30c774c20dc50e4",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "å°†æ‰“åŒ…å¥½çš„JSONå¯¹è±¡å‘é€ç»™nfty",
        "method": "POST",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            },
            {
                "keyType": "other",
                "keyValue": "Markdown",
                "valueType": "other",
                "valueValue": "yes"
            }
        ],
        "x": 1950,
        "y": 1160,
        "wires": [
            [
                "5269fa3aceca98b0"
            ]
        ],
        "info": "å°†é€šçŸ¥é‡æ–°æ‰“åŒ…è½¬å‘åˆ°ntfyçš„MoviePiloté¢‘é“\r\nè¿™é‡Œæ³¨æ„å¦‚æœè¦ç”¨JSONçš„è¯è½¬å‘URLé‡Œä¸èƒ½å¸¦è®¢é˜…ä¸»é¢˜"
    },
    {
        "id": "5269fa3aceca98b0",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"Dockeræ˜ åƒæœ‰æ›´æ–°å‘å¸ƒ\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"Diun\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2270,
        "y": 1160,
        "wires": [
            [
                "2dda5f57bc1ab5c8"
            ]
        ]
    },
    {
        "id": "2dda5f57bc1ab5c8",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2560,
        "y": 1160,
        "wires": []
    },
    {
        "id": "d88076e4d7713c05",
        "type": "change",
        "z": "384abcadb0af9821",
        "d": true,
        "name": "diunæµ‹è¯•ç”¨",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "Diun",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "payload.hostname & 'ä¸Šçš„å®¹å™¨æœ‰æ–°ç‰ˆæœ¬å‘å¸ƒ' & '\\n' &\t$reverse($split(payload.image, \"/\"))[1] & '/' & $reverse($split(payload.image, \"/\"))[0]",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "'## ' & '**' & 'å‘å¸ƒå¹³å°ï¼š' & payload.provider & '**' & '\\n' &\t'## ' & 'æ˜ åƒå…¨ç§°ï¼š' & payload.image & '\\n' &\t'### ' & '**' & 'æ›´æ–°æ—¶é—´ï¼š' & $fromMillis($toMillis(payload.created), '[Y0001]/[M01]/[D01] [h#1]:[m01]') & '**' & '\\n' &\t'æ”¯æŒæ¶æ„ï¼š' & payload.platform & '\\n' &\t'å”¯ä¸€æ ‡è¯†ï¼š' & '`' & payload.digest & '\\n' &\t'æŠ“å–åˆ—è¡¨ï¼š' & payload.mime_type & '\\n' & '`'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 1220,
        "wires": [
            [
                "e30c774c20dc50e4"
            ]
        ],
        "inputLabels": [
            "æ¥è‡ªdiunçš„æ¶ˆæ¯"
        ],
        "info": "diunçš„æµ‹è¯•é€šçŸ¥é‡Œä¸å«urlï¼Œæ‰€ä»¥æ²¡åŠæ³•åŠ actionï¼Œè¿™ä¸ªèŠ‚ç‚¹ä»…ç”¨äºæµ‹è¯•"
    },
    {
        "id": "467425758b8b35c7",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…æ¶ˆæ¯",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "Wallos",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "payload.subscriptioninfo.name & 'è®¢é˜…å³å°†åˆ°æœŸï¼ï¼ï¼'\t",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "'ğŸ’°è®¢é˜…ä»·æ ¼ï¼š' & payload.subscriptioninfo.payer & ' â¡ï¸ ' & payload.subscriptioninfo.price & ' ' & payload.subscriptioninfo.currency & '\\n' &\t'ğŸ“…è®¢é˜…æ—¶é™ï¼š' & payload.subscriptioninfo.days & 'å¤©' & '\\n' &\t'ğŸ”–è®¢é˜…ç±»åˆ«ï¼š' & payload.subscriptioninfo.catagory & '\\n' &\t'â±ï¸è®¢é˜…æ—¥æœŸï¼š' & payload.subscriptioninfo.date & '\\n' &\t'ğŸ—’ï¸è®¢é˜…å¤‡æ³¨ï¼š' & payload.subscriptioninfo.notes & '\\n'\t",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "{\t    \"action\": \"view\",\t    \"label\": \"è®¢é˜…å®˜ç½‘\",\t    \"url\": payload.subscriptioninfo.url\t}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "'http://192.168.5.8:8855/https://chevereto.181691.xyz:4584/images/2024/12/22/android-chrome-512x512.png'\t",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.tags",
                "pt": "msg",
                "to": "[\t    \"repeat\"\t]",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload.days_until",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.subscriptionsinfo",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.subscriptioninfo",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1900,
        "y": 1340,
        "wires": [
            [
                "5c4ac1e118dc2496"
            ]
        ],
        "inputLabels": [
            "æ¥è‡ªdiunçš„æ¶ˆæ¯"
        ],
        "info": "è¿™é‡Œæµ‹è¯•æ—¶ä¸èƒ½åŠ payload.\r\nä½†æ˜¯å®é™…ä½¿ç”¨æ—¶éœ€è¦åŠ ï¼Œå› ä¸ºå®é™…ä¼ å…¥çš„msgæ‰æ˜¯æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯msg.payload\r\né•¿çš„é€»è¾‘è¡¨è¾¾å¼ä¹‹é—´ä¹Ÿéœ€è¦ç”¨&è¿æ¥\r\n\r\nactionä¸­ç”¨åˆ°äº†åˆ¤æ–­ï¼Œåˆ¤å®šè¯¥å½±è§†æ˜¯å¦å­˜åœ¨å®˜ç½‘ï¼Œå¦‚æœæœ‰çš„è¯åŠ ä¸Šç›¸åº”çš„æŒ‰é’®"
    },
    {
        "id": "5c4ac1e118dc2496",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "å°†æ‰“åŒ…å¥½çš„JSONå¯¹è±¡å‘é€ç»™nfty",
        "method": "POST",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "4"
            }
        ],
        "x": 2330,
        "y": 1340,
        "wires": [
            [
                "7c8f58964e5c2aad"
            ]
        ],
        "info": "å°†é€šçŸ¥é‡æ–°æ‰“åŒ…è½¬å‘åˆ°ntfyçš„MoviePiloté¢‘é“\r\nè¿™é‡Œæ³¨æ„å¦‚æœè¦ç”¨JSONçš„è¯è½¬å‘URLé‡Œä¸èƒ½å¸¦è®¢é˜…ä¸»é¢˜"
    },
    {
        "id": "7c8f58964e5c2aad",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"è®¢é˜…å³å°†åˆ°æœŸ\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"Wallos\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 1340,
        "wires": [
            [
                "af19d9d68e8af95e"
            ]
        ]
    },
    {
        "id": "af19d9d68e8af95e",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 1340,
        "wires": []
    },
    {
        "id": "de24cbccc28be417",
        "type": "function",
        "z": "384abcadb0af9821",
        "name": "å¾ªç¯å¤„ç†åŒæ—¶å¿«åˆ°æœŸçš„æ¯ä¸ªè®¢é˜…é€šçŸ¥",
        "func": "for (let i = 0; i < msg.payload.subscriptionsinfo; i++) {\n    msg.payload.subscriptioninfo = msg.payload.subscriptionsinfo[i];\n    node.send(msg);   \n}\nreturn;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 1340,
        "wires": [
            [
                "467425758b8b35c7"
            ]
        ]
    },
    {
        "id": "09d8170af4e4712e",
        "type": "file",
        "z": "384abcadb0af9821",
        "name": "è®°å½•ä¼ å…¥æ•°æ®",
        "filename": "/files/reNotify_log.txt",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 700,
        "y": 920,
        "wires": [
            [
                "311393612e864ede"
            ]
        ]
    },
    {
        "id": "3e8b67037dc3a327",
        "type": "change",
        "z": "384abcadb0af9821",
        "d": true,
        "name": "é‡æ–°åŒ…è£…å¼€å§‹ä¸‹è½½é€šçŸ¥",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "MoviePilot",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "payload.data.context.media_info.title_year & ( payload.data.context.media_info.season = null ? \" \" : (' ' & payload.data.context.media_info.season & ' ' & payload.data.context.meta_info.begin_episode & 'â€”' & payload.data.context.meta_info.end_episode ) ) & 'å·²å¼€å§‹ä¸‹è½½'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "payload.data.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨MPä¸­æŸ¥çœ‹\",\t        \"url\": \"https://mp.181691.xyz:4584/#/downloading\"\t    }\t\t    {\t        \"action\": \"view\",\t        \"label\": \"æŸ¥çœ‹ä¸‹è½½è¿›åº¦\",\t        \"url\": \"https://qb.181691.xyz:4584\"\t    }\t]\t",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "http://192.168.5.8:8855/images/2024/12/25/R-C.png",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.attach",
                "pt": "msg",
                "to": "payload.data.image",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.type",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.data",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1920,
        "y": 640,
        "wires": [
            [
                "5f29bbf5670694b2"
            ]
        ],
        "info": "è¿™é‡Œæµ‹è¯•æ—¶ä¸èƒ½åŠ payload.\r\nä½†æ˜¯å®é™…ä½¿ç”¨æ—¶éœ€è¦åŠ ï¼Œå› ä¸ºå®é™…ä¼ å…¥çš„msgæ‰æ˜¯æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯msg.payload\r\né•¿çš„é€»è¾‘è¡¨è¾¾å¼ä¹‹é—´ä¹Ÿéœ€è¦ç”¨&è¿æ¥\r\n\r\nactionä¸­ç”¨åˆ°äº†åˆ¤æ–­ï¼Œåˆ¤å®šè¯¥å½±è§†æ˜¯å¦å­˜åœ¨å®˜ç½‘ï¼Œå¦‚æœæœ‰çš„è¯åŠ ä¸Šç›¸åº”çš„æŒ‰é’®"
    },
    {
        "id": "5f29bbf5670694b2",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "å°†æ‰“åŒ…å¥½çš„JSONå¯¹è±¡å‘é€ç»™nfty",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            }
        ],
        "x": 2330,
        "y": 700,
        "wires": [
            [
                "2760b9551e56cf2d"
            ]
        ],
        "info": "å°†é€šçŸ¥é‡æ–°æ‰“åŒ…è½¬å‘åˆ°ntfyçš„MoviePiloté¢‘é“\r\nè¿™é‡Œæ³¨æ„å¦‚æœè¦ç”¨JSONçš„è¯è½¬å‘URLé‡Œä¸èƒ½å¸¦è®¢é˜…ä¸»é¢˜"
    },
    {
        "id": "2760b9551e56cf2d",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"èµ„æºä¸‹è½½é€šçŸ¥å‘é€æˆåŠŸ\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"MP Webhook\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 700,
        "wires": [
            [
                "11cb82e1a68ea22e"
            ]
        ]
    },
    {
        "id": "11cb82e1a68ea22e",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 700,
        "wires": []
    },
    {
        "id": "936875b3ff892833",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "å°†æ‰“åŒ…å¥½çš„JSONå¯¹è±¡å‘é€ç»™nfty",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            }
        ],
        "x": 2330,
        "y": 820,
        "wires": [
            [
                "342c8cbcab1e41c8"
            ]
        ],
        "info": "å°†é€šçŸ¥é‡æ–°æ‰“åŒ…è½¬å‘åˆ°ntfyçš„MoviePiloté¢‘é“\r\nè¿™é‡Œæ³¨æ„å¦‚æœè¦ç”¨JSONçš„è¯è½¬å‘URLé‡Œä¸èƒ½å¸¦è®¢é˜…ä¸»é¢˜"
    },
    {
        "id": "342c8cbcab1e41c8",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"è®¢é˜…å®Œæˆé€šçŸ¥å‘é€æˆåŠŸ\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"MP Webhook\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 820,
        "wires": [
            [
                "bcf7b7af382633c4"
            ]
        ]
    },
    {
        "id": "bcf7b7af382633c4",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 820,
        "wires": []
    },
    {
        "id": "268ad1a31ae12227",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "PTç«™åŠ¨æ€æ¶ˆæ¯è½¬å‘åˆ°nfty",
        "method": "POST",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            },
            {
                "keyType": "other",
                "keyValue": "Icon",
                "valueType": "other",
                "valueValue": "https://chevereto.181691.xyz:4584/images/2024/12/25/R-C.png"
            }
        ],
        "x": 2310,
        "y": 160,
        "wires": [
            [
                "e84b9dc4ea6af0e4"
            ]
        ],
        "inputLabels": [
            "æ¥æºä¸ºRSSPush"
        ],
        "info": "æ¶ˆæ¯æ¯”è¾ƒç®€å•ï¼Œç”¨Webhookæ–¹å¼é‡æ–°è½¬å‘åˆ°ntfy"
    },
    {
        "id": "e84b9dc4ea6af0e4",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"æˆåŠŸå¤„ç†\",\"type\":\"PTåŠ¨æ€æ›´æ–°æ¶ˆæ¯\",\"sender\":\"RSSPush\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 160,
        "wires": [
            [
                "5acc8774414868fd"
            ]
        ]
    },
    {
        "id": "5acc8774414868fd",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 160,
        "wires": []
    },
    {
        "id": "1c6d068f286bd40d",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.time",
                "pt": "msg",
                "to": "iso",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 920,
        "wires": [
            [
                "09d8170af4e4712e"
            ]
        ]
    },
    {
        "id": "eea1c28d3003eda0",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…ä¸´æ—¶å·¥æ¶ˆæ¯",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "RSS",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "ğŸ‰å…¶ä¹Keylolä¸Šæœ‰æ–°çš„ä¸´æ—¶å·¥æ¶ˆæ¯ï¼ï¼ï¼",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "payload.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "[     \t    {     \t        \"action\": \"view\",     \t        \"label\": \"æŸ¥çœ‹è¯¦æƒ…\",     \t        \"url\": payload.link    \t    } \t]",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload.task_id",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.task_title",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.text",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.link",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.desp",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1920,
        "y": 120,
        "wires": [
            [
                "c8eb98633434d655"
            ]
        ]
    },
    {
        "id": "f38f4b7a223a26c0",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…PTæ¶ˆæ¯",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "RSS",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "â›“ï¸PTç«™ç‚¹æœ‰æ–°çš„åŠ¨æ€ï¼ï¼ï¼",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "payload.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "[     \t    {     \t        \"action\": \"view\",     \t        \"label\": \"Telegram\",     \t        \"url\": \"tg:resolve?domain=\" & ($reverse($split(payload.link, \"/\")))[1] & \"&post=\" & ($reverse($split(payload.link, \"/\")))[0]     \t    } \t]",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload.task_id",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.task_title",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.text",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.link",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.desp",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1900,
        "y": 160,
        "wires": [
            [
                "268ad1a31ae12227"
            ]
        ]
    },
    {
        "id": "658bd69ccf6853b5",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…å¼€æ’­æ¶ˆæ¯",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "RSS",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "$substringBefore(payload.task_title, \"\\n\") & \" å¼€æ’­äº†\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "payload.title",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "[     \t    {     \t        \"action\": \"view\",     \t        \"label\": \"è¿›å…¥ç›´æ’­é—´\",     \t        \"url\": \"bilibili://live/\" & $substringAfter(payload.link, \"com/\")     \t    } \t]",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "icon",
                "pt": "msg",
                "to": "https://chevereto.181691.xyz:4584/images/2025/01/15/d26d4ec303ea87808c5a5e911e3e6d56.png",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "payload.task_id",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.task_title",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.text",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.link",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.desp",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1910,
        "y": 200,
        "wires": [
            [
                "0226eb4e12a1ad00"
            ]
        ]
    },
    {
        "id": "0226eb4e12a1ad00",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "PTç«™åŠ¨æ€æ¶ˆæ¯è½¬å‘åˆ°nfty",
        "method": "POST",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            },
            {
                "keyType": "other",
                "keyValue": "Icon",
                "valueType": "other",
                "valueValue": "https://chevereto.181691.xyz:4584/images/2025/01/15/d26d4ec303ea87808c5a5e911e3e6d56.png"
            }
        ],
        "x": 2310,
        "y": 200,
        "wires": [
            [
                "345c0e2111fb59bf"
            ]
        ],
        "inputLabels": [
            "æ¥æºä¸ºRSSPush"
        ],
        "info": "æ¶ˆæ¯æ¯”è¾ƒç®€å•ï¼Œç”¨Webhookæ–¹å¼é‡æ–°è½¬å‘åˆ°ntfy"
    },
    {
        "id": "345c0e2111fb59bf",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"æˆåŠŸå¤„ç†\",\"type\":\"ä¸»æ’­å¼€æ’­æ¶ˆæ¯\",\"sender\":\"RSSPush\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 200,
        "wires": [
            [
                "d69569ca8bac7cc8"
            ]
        ]
    },
    {
        "id": "d69569ca8bac7cc8",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 200,
        "wires": []
    },
    {
        "id": "3c7af06b72fec21e",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…å¼€å§‹ä¸‹è½½é€šçŸ¥",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "MoviePilot",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "payload.data.context.media_info.title_year & (payload.data.context.meta_info.season_episode != '' ? ' ' : '' ) & payload.data.context.meta_info.season_episode & ' å·²å¼€å§‹ä¸‹è½½'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "'æ¥è‡ªç”¨æˆ·ï¼š' & payload.data.username & '\\n' & \t'ç«™ç‚¹ï¼š' & payload.data.context.torrent_info.site_name & '\\n' &\t'è´¨é‡ï¼š' & payload.data.context.meta_info.resource_pix & ' ' & payload.data.context.meta_info.resource_type & '\\n' &\t'ç¼–ç æ ¼å¼ï¼š' & payload.data.context.meta_info.video_encode & ' ' & payload.data.context.meta_info.audio_encode & '\\n' &\t'ä¸‹è½½å™¨: ' & payload.data.downloader & '\\n' &\t'ç§å­ï¼š' & payload.data.context.torrent_info.title & '\\n' & \t'æè¿°ï¼š' & payload.data.context.torrent_info.description & '\\n' &\t'å¤§å°ï¼š' & ((payload.data.context.torrent_info.size / 10000000000000 >= 1) ? ($round(payload.data.context.torrent_info.size / 1000000000000, 2) & ' TB') : (payload.data.context.torrent_info.size / 1000000000 >= 1 ? ($round(payload.data.context.torrent_info.size / 1000000000, 2) & ' GB') : ($round(payload.data.context.torrent_info.size / 1000000, 2) & ' MB'))) & '\\n' &\t'åšç§æ•°ï¼š' & payload.data.context.torrent_info.seeders & '\\n' &\t'ç§å­å‘å¸ƒæ—¥æœŸ: ' & payload.data.context.torrent_info.pubdate & '\\n' &\t(payload.data.context.media_info.last_air_date = null ? '' : ('ä¸Šæ¬¡æœ‰æ–°é›†é‡Šå‡ºï¼š' & payload.data.context.media_info.last_air_date) ) & \t(payload.data.context.torrent_info.labels != [] ? ('\\n' & 'æ ‡ç­¾ï¼š' & $join(payload.data.context.torrent_info.labels, 'Â·')) : '' )",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "payload.data.context.media_info.homepage = '' ? \t[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨MPä¸­æŸ¥çœ‹\",\t        \"url\": (payload.data.context.media_info.type = \"ç”µå½±\" ? \"https://mp.181691.xyz:4584/#/subscribe/movie\" : \"https://mp.181691.xyz:4584/#/subscribe/tv\")\t    },\t    \t    {\t        \"action\": \"view\",\t        \"label\": \"TMDB\",\t        \"url\": payload.data.context.media_info.detail_link\t    }\t]\t:\t[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨MPä¸­æŸ¥çœ‹\",\t        \"url\": (payload.data.context.media_info.type = \"ç”µå½±\" ? \"https://mp.181691.xyz:4584/#/subscribe/movie\" : \"https://mp.181691.xyz:4584/#/subscribe/tv\")\t    },\t\t    {\t        \"action\": \"view\",\t        \"label\": \"TMDB\",\t        \"url\": payload.data.context.media_info.detail_link\t    },\t    \t    {\t        \"action\": \"view\",\t        \"label\": \"å®˜ç½‘\",\t        \"url\": payload.data.context.media_info.homepage\t    }\t]",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "payload.data.context.media_info.logo_path = null ? \"https://chevereto.181691.xyz:4584/images/2024/12/26/1000087726.png\" : payload.data.context.media_info.logo_path",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.attach",
                "pt": "msg",
                "to": "payload.data.context.media_info.backdrop_path",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload.type",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.data",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.time",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1920,
        "y": 700,
        "wires": [
            [
                "5f29bbf5670694b2"
            ]
        ],
        "info": "è¿™é‡Œæµ‹è¯•æ—¶ä¸èƒ½åŠ payload.\r\nä½†æ˜¯å®é™…ä½¿ç”¨æ—¶éœ€è¦åŠ ï¼Œå› ä¸ºå®é™…ä¼ å…¥çš„msgæ‰æ˜¯æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯msg.payload\r\né•¿çš„é€»è¾‘è¡¨è¾¾å¼ä¹‹é—´ä¹Ÿéœ€è¦ç”¨&è¿æ¥\r\n\r\nactionä¸­ç”¨åˆ°äº†åˆ¤æ–­ï¼Œåˆ¤å®šè¯¥å½±è§†æ˜¯å¦å­˜åœ¨å®˜ç½‘ï¼Œå¦‚æœæœ‰çš„è¯åŠ ä¸Šç›¸åº”çš„æŒ‰é’®"
    },
    {
        "id": "62098ff47103bd51",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…è®¢é˜…å·²å®Œæˆé€šçŸ¥",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "MoviePilot",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "payload.data.mediainfo.title_year & (payload.data.context.meta_info.season_episode != '' ? ' ' : '' ) & ' å·²å®Œæˆè®¢é˜…'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "'æ¥è‡ªç”¨æˆ·ï¼š' & payload.data.subscribe_info.username & '\\n' & \t'è¯„åˆ†ï¼š' & payload.data.mediainfo.vote_average & '\\n' &\t'æµè¡Œåº¦: ' & $round(payload.data.mediainfo.popularity, 2) & '%' & '\\n' &\t'ç±»åˆ«ï¼š' & payload.data.mediainfo.category & '\\n' &\t'æ—¶é•¿ï¼š' & (payload.data.mediainfo.episode_run_time != [] ? ((($sum(payload.data.mediainfo.episode_run_time) / 60) ~>$floor()) & ' å°æ—¶ ' & ($sum(payload.data.mediainfo.episode_run_time) % 60 & ' åˆ†é’Ÿ')) : ((payload.data.mediainfo.runtime / 60 ~> $floor()) & ' å°æ—¶ ' & payload.data.mediainfo.runtime % 60 & ' åˆ†é’Ÿ') )\t",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "payload.data.mediainfo.homepage = '' ? \t[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨MPä¸­æŸ¥çœ‹\",\t        \"url\": (payload.data.mediainfo.type = \"ç”µå½±\" ? \"https://mp.181691.xyz:4584/#/subscribe/movie\" : \"https://mp.181691.xyz:4584/#/subscribe/tv\")\t    },\t    \t    {\t        \"action\": \"view\",\t        \"label\": \"TMDB\",\t        \"url\": payload.data.mediainfo.detail_link\t    }\t]\t:\t[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨MPä¸­æŸ¥çœ‹\",\t        \"url\": (payload.data.mediainfo.type = \"ç”µå½±\" ? \"https://mp.181691.xyz:4584/#/subscribe/movie\" : \"https://mp.181691.xyz:4584/#/subscribe/tv\")\t    },\t\t    {\t        \"action\": \"view\",\t        \"label\": \"TMDB\",\t        \"url\": payload.data.mediainfo.detail_link\t    },\t    \t    {\t        \"action\": \"view\",\t        \"label\": \"å®˜ç½‘\",\t        \"url\": payload.data.mediainfo.homepage\t    }\t]",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "payload.data.mediainfo.logo_path != null ? payload.data.mediainfo.logo_path : \"https://chevereto.181691.xyz:4584/images/2024/12/26/1000087726.png\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.attach",
                "pt": "msg",
                "to": "payload.data.mediainfo.poster_path",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload.data",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.type",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.time",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1930,
        "y": 820,
        "wires": [
            [
                "936875b3ff892833"
            ]
        ],
        "info": "è¿™é‡Œæµ‹è¯•æ—¶ä¸èƒ½åŠ payload.\r\nä½†æ˜¯å®é™…ä½¿ç”¨æ—¶éœ€è¦åŠ ï¼Œå› ä¸ºå®é™…ä¼ å…¥çš„msgæ‰æ˜¯æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯msg.payload\r\né•¿çš„é€»è¾‘è¡¨è¾¾å¼ä¹‹é—´ä¹Ÿéœ€è¦ç”¨&è¿æ¥\r\n\r\nactionä¸­ç”¨åˆ°äº†åˆ¤æ–­ï¼Œåˆ¤å®šè¯¥å½±è§†æ˜¯å¦å­˜åœ¨å®˜ç½‘ï¼Œå¦‚æœæœ‰çš„è¯åŠ ä¸Šç›¸åº”çš„æŒ‰é’®"
    },
    {
        "id": "55c8ef842e4a4cd2",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "é‡æ–°åŒ…è£…èµ„æºå·²å…¥åº“é€šçŸ¥",
        "rules": [
            {
                "t": "set",
                "p": "payload.topic",
                "pt": "msg",
                "to": "MoviePilot",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "payload.data.mediainfo.title_year & (payload.data.context.meta_info.season_episode != '' ? ' ' : '' ) & ' å·²å…¥åº“'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "'è¯„åˆ†ï¼š' & payload.data.mediainfo.vote_average & '\\n' &\t'çƒ­åº¦æŒ‡æ•°: ' & $round(payload.data.mediainfo.popularity, 2) & '\\n' &\t'ç±»åˆ«ï¼š' & payload.data.mediainfo.category & '\\n' &\t'è´¨é‡: ' & payload.data.meta.resource_pix & ' ' & payload.data.meta.resource_type & '\\n' & \t'ç¼–ç æ ¼å¼ï¼š' & payload.data.meta.video_encode & ' ' & payload.data.meta.audio_encode & '\\n' &\t'æ—¶é•¿ï¼š' & (payload.data.mediainfo.episode_run_time != [] ? ((($sum(payload.data.mediainfo.episode_run_time) / 60) ~>$floor()) & ' å°æ—¶ ' & ($sum(payload.data.mediainfo.episode_run_time) % 60 & ' åˆ†é’Ÿ')) : (payload.data.mediainfo.runtime = null ? 'æœªçŸ¥' :((payload.data.mediainfo.runtime / 60 ~> $floor()) & ' å°æ—¶ ' & payload.data.mediainfo.runtime % 60 & ' åˆ†é’Ÿ') )) & '\\n' &\t(\t    payload.data.transferinfo.success ? (\t        'è½¬ç§»è·¯å¾„ã€' & '\\\"' & $substringBefore(payload.data.transferinfo.fileitem.path, payload.data.transferinfo.fileitem.name) & '\\\"' & ' â¡ï¸ ' & '\\\"' & payload.data.transferinfo.target_diritem.path & '\\\"' & 'ã€‘' & 'å…± ' & payload.data.transferinfo.file_count & ' ä¸ªæ–‡ä»¶ï¼Œå¤§å°ï¼š' & ((payload.data.transferinfo.total_size / 10000000000000 >= 1) ? ($round(payload.data.transferinfo.total_size / 1000000000000, 2) & ' TB') : (payload.data.transferinfo.total_size / 1000000000 >= 1 ? ($round(payload.data.transferinfo.total_size / 1000000000, 2) & ' GB') : ($round(payload.data.transferinfo.total_size / 1000000, 2) & ' MB')))\t    ) \t    :(\t        \"è½¬ç§»å¤±è´¥\"\t    )\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.actions",
                "pt": "msg",
                "to": "payload.data.mediainfo.homepage = '' ? \t[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨Plexä¸­æŸ¥çœ‹\",\t        \"url\": (payload.data.mediainfo.type = \"ç”µå½±\" ? \"https://plex.181691.xyz:4584/web/index.html#!/media/60cd39c82986c502c8fbdfa5ddd027ca3a5cf922/com.plexapp.plugins.library?source=2\" : \"https://plex.181691.xyz:4584/web/index.html#!/media/60cd39c82986c502c8fbdfa5ddd027ca3a5cf922/com.plexapp.plugins.library?source=1\")\t    },\t    \t    {\t        \"action\": \"view\",\t        \"label\": \"TMDB\",\t        \"url\": payload.data.mediainfo.detail_link\t    }\t]\t:\t[\t    {\t        \"action\": \"view\",\t        \"label\": \"åœ¨Plexä¸­æŸ¥çœ‹\",\t        \"url\": (payload.data.mediainfo.type = \"ç”µå½±\" ? \"https://plex.181691.xyz:4584/web/index.html#!/media/60cd39c82986c502c8fbdfa5ddd027ca3a5cf922/com.plexapp.plugins.library?source=2\" : \"https://plex.181691.xyz:4584/web/index.html#!/media/60cd39c82986c502c8fbdfa5ddd027ca3a5cf922/com.plexapp.plugins.library?source=1\")\t    },\t    {\t        \"action\": \"view\",\t        \"label\": \"TMDB\",\t        \"url\": payload.data.mediainfo.detail_link\t    },\t    \t    {\t        \"action\": \"view\",\t        \"label\": \"å®˜ç½‘\",\t        \"url\": payload.data.mediainfo.homepage\t    }\t]",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "payload.data.mediainfo.logo_path != null ? payload.data.mediainfo.logo_path : \"https://chevereto.181691.xyz:4584/images/2024/12/26/1000087726.png\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.attach",
                "pt": "msg",
                "to": "payload.data.mediainfo.poster_path",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload.data",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.type",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.time",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1930,
        "y": 940,
        "wires": [
            [
                "52ad28652218e09c"
            ]
        ],
        "info": "è¿™é‡Œæµ‹è¯•æ—¶ä¸èƒ½åŠ payload.\r\nä½†æ˜¯å®é™…ä½¿ç”¨æ—¶éœ€è¦åŠ ï¼Œå› ä¸ºå®é™…ä¼ å…¥çš„msgæ‰æ˜¯æ ¹ç›®å½•ï¼Œè€Œä¸æ˜¯msg.payload\r\né•¿çš„é€»è¾‘è¡¨è¾¾å¼ä¹‹é—´ä¹Ÿéœ€è¦ç”¨&è¿æ¥\r\n\r\nactionä¸­ç”¨åˆ°äº†åˆ¤æ–­ï¼Œåˆ¤å®šè¯¥å½±è§†æ˜¯å¦å­˜åœ¨å®˜ç½‘ï¼Œå¦‚æœæœ‰çš„è¯åŠ ä¸Šç›¸åº”çš„æŒ‰é’®"
    },
    {
        "id": "52ad28652218e09c",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "å°†æ‰“åŒ…å¥½çš„JSONå¯¹è±¡å‘é€ç»™nfty",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            }
        ],
        "x": 2330,
        "y": 940,
        "wires": [
            [
                "49ca3f683af1edd7"
            ]
        ],
        "info": "å°†é€šçŸ¥é‡æ–°æ‰“åŒ…è½¬å‘åˆ°ntfyçš„MoviePiloté¢‘é“\r\nè¿™é‡Œæ³¨æ„å¦‚æœè¦ç”¨JSONçš„è¯è½¬å‘URLé‡Œä¸èƒ½å¸¦è®¢é˜…ä¸»é¢˜"
    },
    {
        "id": "49ca3f683af1edd7",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"è½¬ç§»æˆåŠŸé€šçŸ¥å‘é€æˆåŠŸ\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"MP Webhook\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 940,
        "wires": [
            [
                "2b23b974d8707efb"
            ]
        ]
    },
    {
        "id": "2b23b974d8707efb",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 940,
        "wires": []
    },
    {
        "id": "376d93f341066c0b",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"Movie Pilot é€šçŸ¥è½¬å‘å¤±è´¥\",\"type\":\"æ— åŒ¹é…çš„MPäº‹ä»¶ç±»å‹\",\"sender\":\"MP Webhook\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 1060,
        "wires": [
            [
                "66eb0c795259065a"
            ]
        ]
    },
    {
        "id": "340f4885275ca577",
        "type": "switch",
        "z": "384abcadb0af9821",
        "name": "åˆ¤æ–­æ˜¯ä½•ç§RSSä¸»é¢˜",
        "property": "payload.feed.title",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "($contains(msg.payload.feed.title, \"ä¸´æ—¶å·¥\") and $contains(msg.payload.feed.title, \"å…¶ä¹\"))\t",
                "vt": "jsonata"
            },
            {
                "t": "cont",
                "v": "PTé£å‘æ——",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "ç›´æ’­é—´å¼€æ’­",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1500,
        "y": 380,
        "wires": [
            [
                "a4c5bb0ebf28a202"
            ],
            [
                "50675138c00f376c"
            ],
            [
                "cf3e045a377e2e2b"
            ],
            [
                "523620a1dba7aa6e"
            ]
        ]
    },
    {
        "id": "a4c5bb0ebf28a202",
        "type": "function",
        "z": "384abcadb0af9821",
        "name": "å¾ªç¯å¤„ç†æ¯æ¡æ–°RSSæ¶ˆæ¯",
        "func": "// å®šä¹‰é‡æ–°åŒ…è£…åçš„JSON\nconst packaged_msg = {\n    \"payload\": {\n        // å®šä¹‰æ˜¯å¦å¤„ç†å®ŒRSSé˜Ÿåˆ—ä¸­æ‰€æœ‰RSSçš„æ ‡å¿— \n        \"task_done\": false,\n        \"topic\": \"RSS\",\n        \"title\": \"ğŸ‰å…¶ä¹Keylolä¸Šæœ‰æ–°çš„ä¸´æ—¶å·¥æ¶ˆæ¯ï¼ï¼ï¼\"\n    }\n};\n\n// è°ƒç”¨åˆå§‹åŒ–å‡½æ•°ä¸­å®šä¹‰çš„æ ¼å¼åŒ–æ—¶é—´æˆ³å‡½æ•°\nconst formatTimestamp = global.get(\"formatTimestamp\");\n\n// // å¾ªç¯éå†RSSé˜Ÿåˆ—ä¸­çš„æ¯æ¡RSS\n// for (const entry of msg.payload.entries) {\n//     // é‡æ–°åŒ…è£…æ¶ˆæ¯\n//     packaged_msg.payload.message = (\n//         \"æ ‡é¢˜ï¼š\" + entry.title + \"\\n\" +\n//         // ä½¿ç”¨è·å–çš„å‡½æ•°æ ¼å¼åŒ–æ—¶é—´æˆ³\n//         \"å‘å¸ƒæ—¶é—´ï¼š\" + formatTimestamp(entry.pulished_at) + \"\\n\" +\n//         \"é˜…è¯»æ—¶é—´ï¼š\" + entry.reading_time + \" åˆ†é’Ÿ\"\n//     );\n//     packaged_msg.payload.actions = [\n//         {\n//             \"action\": \"view\",\n//             \"label\": \"æŸ¥çœ‹è¯¦æƒ…\",\n//             \"url\": entry.url\n//         }\n//     ]\n\n//     node.send(packaged_msg);\n//     node.done();\n// };\n\n// é¡ºåºå¤„ç†å¼‚æ­¥é˜Ÿåˆ—æ¶ˆæ¯å‡½æ•°ï¼Œå»¶è¿Ÿ1ç§’\nfunction processItem(index, entries, packaged_msg) {\n    return new Promise((resolve, reject) => {\n        // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚ setTimeoutï¼‰\n        setTimeout(function() {\n            try {\n                // å¤„ç†æ•°ç»„çš„å½“å‰é¡¹\n                packaged_msg.payload.message = (\n                    \"æ ‡é¢˜ï¼š\" + entries[index].title + \"\\n\" +\n                    // ä½¿ç”¨è·å–çš„å‡½æ•°æ ¼å¼åŒ–æ—¶é—´æˆ³\n                    \"å‘å¸ƒæ—¶é—´ï¼š\" + formatTimestamp(entries[index].pulished_at) + \"\\n\" +\n                    \"é˜…è¯»æ—¶é—´ï¼š\" + entries[index].reading_time + \" åˆ†é’Ÿ\"\n                );\n                packaged_msg.payload.actions = [     \n                    {     \n                        \"action\": \"view\",     \n                        \"label\": \"æŸ¥çœ‹è¯¦æƒ…\",     \n                        \"url\": entries[index].url    \n                    } \n                ];\n\n                // æŒ‰é¡ºåºå‘é€æ¶ˆæ¯\n                node.send(packaged_msg); \n\n                // å¦‚æœè¿˜æ²¡æœ‰å¤„ç†å®Œæ‰€æœ‰é¡¹ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª\n                if (index < entries.length - 1) {\n                    // é€’å½’è°ƒç”¨ï¼Œè¿”å› Promise ä¿è¯é¡ºåº\n                    processItem(index + 1, entries, packaged_msg)\n                        .then(resolve)\n                        .catch(reject);\n                } else {\n                    // å·²å¤„ç†å®Œæ‰€æœ‰å…ƒç´ ï¼Œè¿”å›å®Œæˆçš„æ¶ˆæ¯\n                    resolve(\"å·²å¤„ç†å®Œæ‰€æœ‰æ•°ç»„å…ƒç´ \");\n                }\n            } catch (error) {\n                reject(error);\n            }\n        }, 500);  // å»¶è¿Ÿ0.5ç§’æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ\n    });\n};\n\nconst beginIndex = 0;\nprocessItem(beginIndex, msg.payload.entries, packaged_msg);\n\n// RSSé˜Ÿåˆ—ä¸­æ‰€æœ‰æ¶ˆæ¯å¤„ç†å®Œåï¼Œæ›´æ”¹å¤„ç†æ ‡è®°ä¸ºå·²å®Œæˆ\nmsg.payload.task_done = true\nreturn msg;",
        "outputs": 1,
        "timeout": "0",
        "noerr": 0,
        "initialize": "// éƒ¨ç½²èŠ‚ç‚¹åï¼Œæ­¤å¤„æ·»åŠ çš„ä»£ç å°†è¿è¡Œä¸€æ¬¡ã€‚ \n// å®šä¹‰æ ¼å¼åŒ–æ—¶é—´æˆ³å‡½æ•°ï¼Œå–è‡ªChatGPT\nglobal.set(\"formatTimestamp\", function (timestamp) {\n    const date = new Date(timestamp);\n\n    // è·å–å„éƒ¨åˆ†æ—¶é—´\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // æœˆä»½ä» 0 å¼€å§‹ï¼Œéœ€è¦åŠ  1\n    const day = String(date.getDate()).padStart(2, '0');\n    const hour = String(date.getHours()).padStart(2, '0'); // 24 å°æ—¶åˆ¶\n    const minute = String(date.getMinutes()).padStart(2, '0');\n    const second = String(date.getSeconds()).padStart(2, '0');\n\n    // æ ¼å¼åŒ–ä¸º \"æŸå¹´æŸæœˆæŸæ—¥æŸæ—¶æŸåˆ†æŸç§’\" çš„å½¢å¼\n    return `${year} å¹´ ${month} æœˆ ${day} æ—¥ ${hour} æ—¶ ${minute} åˆ† ${second} ç§’`;\n});\n// console.log(formatTimestampWithPadding(timestamp));\n// è¾“å‡ºï¼š2025å¹´01æœˆ19æ—¥06æ—¶53åˆ†54ç§’",
        "finalize": "",
        "libs": [],
        "x": 1930,
        "y": 280,
        "wires": [
            [
                "1ec78f11f3f27b88"
            ]
        ]
    },
    {
        "id": "6742837715dbed0c",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "ä¸´æ—¶å·¥æ¶ˆæ¯è½¬å‘åˆ°nfty",
        "method": "POST",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "4"
            },
            {
                "keyType": "other",
                "keyValue": "Icon",
                "valueType": "other",
                "valueValue": "https://keylol.com/template/steamcn_metro/src/img/common/icon_with_text_256h.png"
            }
        ],
        "x": 2300,
        "y": 260,
        "wires": [
            []
        ],
        "inputLabels": [
            "æ¥æºä¸ºRSSPush"
        ],
        "info": "æ¶ˆæ¯æ¯”è¾ƒç®€å•ï¼Œç”¨Webhookæ–¹å¼é‡æ–°è½¬å‘åˆ°ntfy"
    },
    {
        "id": "1ec78f11f3f27b88",
        "type": "switch",
        "z": "384abcadb0af9821",
        "name": "",
        "property": "payload.task_done",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2110,
        "y": 280,
        "wires": [
            [
                "6742837715dbed0c"
            ],
            [
                "df66af053789c543"
            ]
        ],
        "outputLabels": [
            "å¾ªç¯å¤„ç†RSSé˜Ÿåˆ—æ¶ˆæ¯",
            "å¤„ç†å®Œæˆï¼Œå‘é€å“åº”"
        ]
    },
    {
        "id": "151411895d0389e6",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 300,
        "wires": []
    },
    {
        "id": "df66af053789c543",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"å…¶ä¹ä¸´æ—¶å·¥æ¶ˆæ¯\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"RSSPush\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 300,
        "wires": [
            [
                "151411895d0389e6"
            ]
        ]
    },
    {
        "id": "85374902ec5bcb77",
        "type": "function",
        "z": "384abcadb0af9821",
        "d": true,
        "name": "åˆå§‹åŒ–ä¸€ç³»åˆ—å‡½æ•°ï¼ˆå‹¿åˆ ï¼‰",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// éƒ¨ç½²èŠ‚ç‚¹åï¼Œæ­¤å¤„æ·»åŠ çš„ä»£ç å°†è¿è¡Œä¸€æ¬¡ã€‚ \n// å®šä¹‰æ ¼å¼åŒ–æ—¶é—´æˆ³å‡½æ•°ï¼Œå–è‡ªChatGPT\nglobal.set(\"formatTimestamp\", function (timestamp) {\n    const date = new Date(timestamp);\n\n    // è·å–å„éƒ¨åˆ†æ—¶é—´\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // æœˆä»½ä» 0 å¼€å§‹ï¼Œéœ€è¦åŠ  1\n    const day = String(date.getDate()).padStart(2, '0');\n    const hour = String(date.getHours()).padStart(2, '0'); // 24 å°æ—¶åˆ¶\n    const minute = String(date.getMinutes()).padStart(2, '0');\n    const second = String(date.getSeconds()).padStart(2, '0');\n\n    // æ ¼å¼åŒ–ä¸º \"æŸå¹´æŸæœˆæŸæ—¥æŸæ—¶æŸåˆ†æŸç§’\" çš„å½¢å¼\n    return `${year} å¹´ ${month} æœˆ ${day} æ—¥ ${hour} æ—¶ ${minute} åˆ† ${second} ç§’`;\n});\n// console.log(formatTimestampWithPadding(timestamp));\n// è¾“å‡ºï¼š2025å¹´01æœˆ19æ—¥06æ—¶53åˆ†54ç§’\n\nconst formatTimestamp = global.get(\"formatTimestamp\");\n\n// é¡ºåºå¤„ç†å¼‚æ­¥é˜Ÿåˆ—æ¶ˆæ¯å‡½æ•°ï¼Œå»¶è¿Ÿ1ç§’\nglobal.set(\"processItemSequentially\", function processItem(index, entries, packaged_msg) {\n    return new Promise((resolve, reject) => {\n        console.log(`å¤„ç†ç¬¬ ${index} ä¸ªæ¡ç›®`);\n\n        // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚ setTimeoutï¼‰\n        setTimeout(function() {\n            try {\n                // å¤„ç†æ•°ç»„çš„å½“å‰é¡¹\n                packaged_msg.payload.message = (\n                    \"æ ‡é¢˜ï¼š\" + entries[index].title + \"\\n\" +\n                    \"å‘å¸ƒæ—¶é—´ï¼š\" + formatTimestamp(entries[index].pulished_at) + \"\\n\" +\n                    \"é˜…è¯»æ—¶é—´ï¼š\" + entries[index].reading_time + \" åˆ†é’Ÿ\"\n                );\n                packaged_msg.payload.actions = [     \n                    {     \n                        \"action\": \"view\",     \n                        \"label\": \"æŸ¥çœ‹è¯¦æƒ…\",     \n                        \"url\": entries[index].url    \n                    } \n                ];\n\n                // æ‰“å°å½“å‰æ¶ˆæ¯å†…å®¹\n                console.log(`å‘é€æ¶ˆæ¯ï¼š`, packaged_msg.payload);\n\n                // æŒ‰é¡ºåºå‘é€æ¶ˆæ¯\n                node.send(packaged_msg); \n\n                // å¦‚æœè¿˜æ²¡æœ‰å¤„ç†å®Œæ‰€æœ‰é¡¹ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª\n                if (index < entries.length - 1) {\n                    processItem(index + 1, entries, packaged_msg)\n                        .then(resolve)\n                        .catch(reject);\n                } else {\n                    console.log(\"æ‰€æœ‰æ•°ç»„å…ƒç´ å·²å¤„ç†å®Œ\");\n                    resolve(\"å·²å¤„ç†å®Œæ‰€æœ‰æ•°ç»„å…ƒç´ \");\n                }\n            } catch (error) {\n                console.error(\"å‘ç”Ÿé”™è¯¯:\", error);\n                reject(error);\n            }\n        }, 1000);  // å»¶è¿Ÿ1ç§’æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ\n    });\n});\n",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "311393612e864ede",
        "type": "delay",
        "z": "384abcadb0af9821",
        "name": "é¿å…æ¶ˆæ¯æ‹¥å µ",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 940,
        "y": 920,
        "wires": [
            [
                "58673e9845f4a0ef"
            ]
        ]
    },
    {
        "id": "50675138c00f376c",
        "type": "function",
        "z": "384abcadb0af9821",
        "name": "å¾ªç¯å¤„ç†æ¯æ¡æ–°RSSæ¶ˆæ¯",
        "func": "// å®šä¹‰é‡æ–°åŒ…è£…åçš„JSON\nconst packaged_msg = {\n    \"payload\": {\n        // å®šä¹‰æ˜¯å¦å¤„ç†å®ŒRSSé˜Ÿåˆ—ä¸­æ‰€æœ‰RSSçš„æ ‡å¿— \n        \"task_done\": false,\n        \"topic\": \"RSS\",\n        \"title\": \"â›“ï¸PTç«™ç‚¹æœ‰æ–°çš„åŠ¨æ€ï¼ï¼ï¼\"\n    }\n};\n\n// è°ƒç”¨åˆå§‹åŒ–å‡½æ•°ä¸­å®šä¹‰çš„æ ¼å¼åŒ–æ—¶é—´æˆ³å‡½æ•°\nconst formatTimestamp = global.get(\"formatTimestamp\");\n\n// // å¾ªç¯éå†RSSé˜Ÿåˆ—ä¸­çš„æ¯æ¡RSS\n// for (const entry of msg.payload.entries) {\n//     // é‡æ–°åŒ…è£…æ¶ˆæ¯\n//     packaged_msg.payload.message = (\n//         \"æ ‡é¢˜ï¼š\" + entry.title + \"\\n\" +\n//         // ä½¿ç”¨è·å–çš„å‡½æ•°æ ¼å¼åŒ–æ—¶é—´æˆ³\n//         \"å‘å¸ƒæ—¶é—´ï¼š\" + formatTimestamp(entry.pulished_at) + \"\\n\" +\n//         \"é˜…è¯»æ—¶é—´ï¼š\" + entry.reading_time + \" åˆ†é’Ÿ\"\n//     );\n//     packaged_msg.payload.actions = [\n//         {\n//             \"action\": \"view\",\n//             \"label\": \"æŸ¥çœ‹è¯¦æƒ…\",\n//             \"url\": entry.url\n//         }\n//     ]\n\n//     node.send(packaged_msg);\n//     node.done();\n// };\n\n// é¡ºåºå¤„ç†å¼‚æ­¥é˜Ÿåˆ—æ¶ˆæ¯å‡½æ•°ï¼Œå»¶è¿Ÿ1ç§’\nfunction processItem(index, entries, packaged_msg) {\n    return new Promise((resolve, reject) => {\n        // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚ setTimeoutï¼‰\n        setTimeout(function() {\n            try {\n                // å¤„ç†æ•°ç»„çš„å½“å‰é¡¹\n                packaged_msg.payload.message = (\n                    \"æ ‡é¢˜ï¼š\" + entries[index].title + \"\\n\" +\n                    // ä½¿ç”¨è·å–çš„å‡½æ•°æ ¼å¼åŒ–æ—¶é—´æˆ³\n                    \"å‘å¸ƒæ—¶é—´ï¼š\" + formatTimestamp(entries[index].pulished_at) + \"\\n\" +\n                    \"é˜…è¯»æ—¶é—´ï¼š\" + entries[index].reading_time + \" åˆ†é’Ÿ\"\n                );\n                packaged_msg.payload.actions = [     \n                    {     \n                        \"action\": \"view\",     \n                        \"label\": \"æŸ¥çœ‹è¯¦æƒ…\",     \n                        \"url\": entries[index].url    \n                    } \n                ];\n\n                // æŒ‰é¡ºåºå‘é€æ¶ˆæ¯\n                node.send(packaged_msg); \n\n                // å¦‚æœè¿˜æ²¡æœ‰å¤„ç†å®Œæ‰€æœ‰é¡¹ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª\n                if (index < entries.length - 1) {\n                    // é€’å½’è°ƒç”¨ï¼Œè¿”å› Promise ä¿è¯é¡ºåº\n                    processItem(index + 1, entries, packaged_msg)\n                        .then(resolve)\n                        .catch(reject);\n                } else {\n                    // å·²å¤„ç†å®Œæ‰€æœ‰å…ƒç´ ï¼Œè¿”å›å®Œæˆçš„æ¶ˆæ¯\n                    resolve(\"å·²å¤„ç†å®Œæ‰€æœ‰æ•°ç»„å…ƒç´ \");\n                }\n            } catch (error) {\n                reject(error);\n            }\n        }, 500);  // å»¶è¿Ÿ0.5ç§’æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ\n    });\n};\n\nconst beginIndex = 0;\nprocessItem(beginIndex, msg.payload.entries, packaged_msg);\n\n// RSSé˜Ÿåˆ—ä¸­æ‰€æœ‰æ¶ˆæ¯å¤„ç†å®Œåï¼Œæ›´æ”¹å¤„ç†æ ‡è®°ä¸ºå·²å®Œæˆ\nmsg.payload.task_done = true\nreturn msg;",
        "outputs": 1,
        "timeout": "0",
        "noerr": 0,
        "initialize": "// éƒ¨ç½²èŠ‚ç‚¹åï¼Œæ­¤å¤„æ·»åŠ çš„ä»£ç å°†è¿è¡Œä¸€æ¬¡ã€‚ \n// å®šä¹‰æ ¼å¼åŒ–æ—¶é—´æˆ³å‡½æ•°ï¼Œå–è‡ªChatGPT\nglobal.set(\"formatTimestamp\", function (timestamp) {\n    const date = new Date(timestamp);\n\n    // è·å–å„éƒ¨åˆ†æ—¶é—´\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // æœˆä»½ä» 0 å¼€å§‹ï¼Œéœ€è¦åŠ  1\n    const day = String(date.getDate()).padStart(2, '0');\n    const hour = String(date.getHours()).padStart(2, '0'); // 24 å°æ—¶åˆ¶\n    const minute = String(date.getMinutes()).padStart(2, '0');\n    const second = String(date.getSeconds()).padStart(2, '0');\n\n    // æ ¼å¼åŒ–ä¸º \"æŸå¹´æŸæœˆæŸæ—¥æŸæ—¶æŸåˆ†æŸç§’\" çš„å½¢å¼\n    return `${year} å¹´ ${month} æœˆ ${day} æ—¥ ${hour} æ—¶ ${minute} åˆ† ${second} ç§’`;\n});\n// console.log(formatTimestampWithPadding(timestamp));\n// è¾“å‡ºï¼š2025å¹´01æœˆ19æ—¥06æ—¶53åˆ†54ç§’",
        "finalize": "",
        "libs": [],
        "x": 1930,
        "y": 360,
        "wires": [
            [
                "d24e25d7f89be3e8"
            ]
        ]
    },
    {
        "id": "d24e25d7f89be3e8",
        "type": "switch",
        "z": "384abcadb0af9821",
        "name": "",
        "property": "payload.task_done",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2110,
        "y": 360,
        "wires": [
            [
                "d8c01e81af6120ab"
            ],
            [
                "ba45346443d4d206"
            ]
        ],
        "outputLabels": [
            "å¾ªç¯å¤„ç†RSSé˜Ÿåˆ—æ¶ˆæ¯",
            "å¤„ç†å®Œæˆï¼Œå‘é€å“åº”"
        ]
    },
    {
        "id": "19b545c8013d9022",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 380,
        "wires": []
    },
    {
        "id": "ba45346443d4d206",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"PTåŠ¨æ€æ›´æ–°æ¶ˆæ¯\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"RSSPush\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 380,
        "wires": [
            [
                "19b545c8013d9022"
            ]
        ]
    },
    {
        "id": "d8c01e81af6120ab",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "PTç«™åŠ¨æ€æ¶ˆæ¯è½¬å‘åˆ°nfty",
        "method": "POST",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            },
            {
                "keyType": "other",
                "keyValue": "Icon",
                "valueType": "other",
                "valueValue": "https://chevereto.181691.xyz:4584/images/2024/12/25/R-C.png"
            }
        ],
        "x": 2310,
        "y": 340,
        "wires": [
            []
        ],
        "inputLabels": [
            "æ¥æºä¸ºRSSPush"
        ],
        "info": "æ¶ˆæ¯æ¯”è¾ƒç®€å•ï¼Œç”¨Webhookæ–¹å¼é‡æ–°è½¬å‘åˆ°ntfy"
    },
    {
        "id": "efcce0bbb140eeac",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"ä¸»æ’­å¼€æ’­æ¶ˆæ¯\",\"type\":\"æˆåŠŸå¤„ç†\",\"sender\":\"RSSPush\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2570,
        "y": 460,
        "wires": [
            [
                "2e604344ea8f451e"
            ]
        ]
    },
    {
        "id": "cf3e045a377e2e2b",
        "type": "function",
        "z": "384abcadb0af9821",
        "name": "å¾ªç¯å¤„ç†æ¯æ¡æ–°RSSæ¶ˆæ¯",
        "func": "// å®šä¹‰é‡æ–°åŒ…è£…åçš„JSON\nconst packaged_msg = {\n    \"payload\": {\n        // å®šä¹‰æ˜¯å¦å¤„ç†å®ŒRSSé˜Ÿåˆ—ä¸­æ‰€æœ‰RSSçš„æ ‡å¿— \n        \"task_done\": false,\n        \"topic\": \"RSS\",\n        \"title\": \"ğŸ“º\" + msg.payload.feed.title.split(\"ç›´æ’­é—´\")[0] + \" å¼€æ’­äº†!!!\"\n    }\n};\n\n// è°ƒç”¨åˆå§‹åŒ–å‡½æ•°ä¸­å®šä¹‰çš„æ ¼å¼åŒ–æ—¶é—´æˆ³å‡½æ•°\nconst formatTimestamp = global.get(\"formatTimestamp\");\n\n// // å¾ªç¯éå†RSSé˜Ÿåˆ—ä¸­çš„æ¯æ¡RSS\n// for (const entry of msg.payload.entries) {\n//     // é‡æ–°åŒ…è£…æ¶ˆæ¯\n//     packaged_msg.payload.message = (\n//         \"æ ‡é¢˜ï¼š\" + entry.title + \"\\n\" +\n//         // ä½¿ç”¨è·å–çš„å‡½æ•°æ ¼å¼åŒ–æ—¶é—´æˆ³\n//         \"å‘å¸ƒæ—¶é—´ï¼š\" + formatTimestamp(entry.pulished_at) + \"\\n\" +\n//         \"é˜…è¯»æ—¶é—´ï¼š\" + entry.reading_time + \" åˆ†é’Ÿ\"\n//     );\n//     packaged_msg.payload.actions = [\n//         {\n//             \"action\": \"view\",\n//             \"label\": \"æŸ¥çœ‹è¯¦æƒ…\",\n//             \"url\": entry.url\n//         }\n//     ]\n\n//     node.send(packaged_msg);\n//     node.done();\n// };\n\n// é¡ºåºå¤„ç†å¼‚æ­¥é˜Ÿåˆ—æ¶ˆæ¯å‡½æ•°ï¼Œå»¶è¿Ÿ1ç§’\nfunction processItem(index, entries, packaged_msg) {\n    return new Promise((resolve, reject) => {\n        // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚ setTimeoutï¼‰\n        setTimeout(function() {\n            try {\n                // å¤„ç†æ•°ç»„çš„å½“å‰é¡¹\n                packaged_msg.payload.message = (\n                    \"æ ‡é¢˜ï¼š\" + entries[index].title + \"\\n\" +\n                    // ä½¿ç”¨è·å–çš„å‡½æ•°æ ¼å¼åŒ–æ—¶é—´æˆ³\n                    \"å‘å¸ƒæ—¶é—´ï¼š\" + formatTimestamp(entries[index].pulished_at) + \"\\n\" +\n                    \"é˜…è¯»æ—¶é—´ï¼š\" + entries[index].reading_time + \" åˆ†é’Ÿ\"\n                );\n                packaged_msg.payload.actions = [     \n                    {     \n                        \"action\": \"view\",     \n                        \"label\": \"æŸ¥çœ‹è¯¦æƒ…\",     \n                        \"url\": entries[index].url    \n                    } \n                ];\n\n                // æŒ‰é¡ºåºå‘é€æ¶ˆæ¯\n                node.send(packaged_msg); \n\n                // å¦‚æœè¿˜æ²¡æœ‰å¤„ç†å®Œæ‰€æœ‰é¡¹ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª\n                if (index < entries.length - 1) {\n                    // é€’å½’è°ƒç”¨ï¼Œè¿”å› Promise ä¿è¯é¡ºåº\n                    processItem(index + 1, entries, packaged_msg)\n                        .then(resolve)\n                        .catch(reject);\n                } else {\n                    // å·²å¤„ç†å®Œæ‰€æœ‰å…ƒç´ ï¼Œè¿”å›å®Œæˆçš„æ¶ˆæ¯\n                    resolve(\"å·²å¤„ç†å®Œæ‰€æœ‰æ•°ç»„å…ƒç´ \");\n                }\n            } catch (error) {\n                reject(error);\n            }\n        }, 500);  // å»¶è¿Ÿ0.5ç§’æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ\n    });\n};\n\nconst beginIndex = 0;\nprocessItem(beginIndex, msg.payload.entries, packaged_msg);\n\n// RSSé˜Ÿåˆ—ä¸­æ‰€æœ‰æ¶ˆæ¯å¤„ç†å®Œåï¼Œæ›´æ”¹å¤„ç†æ ‡è®°ä¸ºå·²å®Œæˆ\nmsg.payload.task_done = true\nreturn msg;",
        "outputs": 1,
        "timeout": "0",
        "noerr": 0,
        "initialize": "// éƒ¨ç½²èŠ‚ç‚¹åï¼Œæ­¤å¤„æ·»åŠ çš„ä»£ç å°†è¿è¡Œä¸€æ¬¡ã€‚ \n// å®šä¹‰æ ¼å¼åŒ–æ—¶é—´æˆ³å‡½æ•°ï¼Œå–è‡ªChatGPT\nglobal.set(\"formatTimestamp\", function (timestamp) {\n    const date = new Date(timestamp);\n\n    // è·å–å„éƒ¨åˆ†æ—¶é—´\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // æœˆä»½ä» 0 å¼€å§‹ï¼Œéœ€è¦åŠ  1\n    const day = String(date.getDate()).padStart(2, '0');\n    const hour = String(date.getHours()).padStart(2, '0'); // 24 å°æ—¶åˆ¶\n    const minute = String(date.getMinutes()).padStart(2, '0');\n    const second = String(date.getSeconds()).padStart(2, '0');\n\n    // æ ¼å¼åŒ–ä¸º \"æŸå¹´æŸæœˆæŸæ—¥æŸæ—¶æŸåˆ†æŸç§’\" çš„å½¢å¼\n    return `${year} å¹´ ${month} æœˆ ${day} æ—¥ ${hour} æ—¶ ${minute} åˆ† ${second} ç§’`;\n});\n// console.log(formatTimestampWithPadding(timestamp));\n// è¾“å‡ºï¼š2025å¹´01æœˆ19æ—¥06æ—¶53åˆ†54ç§’",
        "finalize": "",
        "libs": [],
        "x": 1930,
        "y": 440,
        "wires": [
            [
                "66f8aa59e5ae1602"
            ]
        ]
    },
    {
        "id": "66f8aa59e5ae1602",
        "type": "switch",
        "z": "384abcadb0af9821",
        "name": "",
        "property": "payload.task_done",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2110,
        "y": 440,
        "wires": [
            [
                "92cc27d39cbba330"
            ],
            [
                "efcce0bbb140eeac"
            ]
        ],
        "outputLabels": [
            "å¾ªç¯å¤„ç†RSSé˜Ÿåˆ—æ¶ˆæ¯",
            "å¤„ç†å®Œæˆï¼Œå‘é€å“åº”"
        ]
    },
    {
        "id": "2e604344ea8f451e",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2760,
        "y": 460,
        "wires": []
    },
    {
        "id": "92cc27d39cbba330",
        "type": "http request",
        "z": "384abcadb0af9821",
        "name": "ç›´æ’­é—´å¼€æ’­åŠ¨æ€è½¬å‘åˆ°nfty",
        "method": "POST",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.5.8:9050/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "Bearer tk_tl1po03abi41c7fe4zk3m0lagfd6s"
            },
            {
                "keyType": "other",
                "keyValue": "Priority",
                "valueType": "other",
                "valueValue": "3"
            },
            {
                "keyType": "other",
                "keyValue": "Icon",
                "valueType": "other",
                "valueValue": "https://chevereto.181691.xyz:4584/images/2024/12/25/R-C.png"
            }
        ],
        "x": 2310,
        "y": 420,
        "wires": [
            []
        ],
        "inputLabels": [
            "æ¥æºä¸ºRSSPush"
        ],
        "info": "æ¶ˆæ¯æ¯”è¾ƒç®€å•ï¼Œç”¨Webhookæ–¹å¼é‡æ–°è½¬å‘åˆ°ntfy"
    },
    {
        "id": "f8d0bd8d5c2f6a65",
        "type": "inject",
        "z": "384abcadb0af9821",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"event_type\":\"new_entries\",\"feed\":{\"id\":9,\"user_id\":1,\"category_id\":4,\"category\":{\"id\":4,\"title\":\"è´­ç‰©ä¼˜æƒ \"},\"feed_url\":\"http://192.168.5.8:10799/keylol/fid=234&typeid=786\",\"site_url\":\"https://keylol.com/forum.php?fid=234&filter=author&mod=forumdisplay&orderby=dateline&typeid=786\",\"title\":\"ä¸´æ—¶å·¥ - è´­ç‰©å¿ƒå¾— - å…¶ä¹ Keylol\",\"checked_at\":\"2025-01-19T15:04:59.067447089Z\"},\"entries\":[{\"id\":575,\"user_id\":1,\"feed_id\":9,\"status\":\"unread\",\"hash\":\"c97b5bcd5cb48c83c135aab64e85545600edb90d54449b1bee4366d5653865e7\",\"title\":\"ä¸´æ—¶å·¥æ¢¦ç¯èŠ±/æµ·æ²™é£äº‘\",\"url\":\"https://keylol.com/forum.php?mod=viewthread&tid=986296\",\"comments_url\":\"\",\"published_at\":\"2025-01-19T13:52:53Z\",\"created_at\":\"2025-01-19T15:05:15.952994Z\",\"changed_at\":\"2025-01-19T15:05:15.952994Z\",\"content\":\"<a href=\\\"https://store.steampowered.com/app/1250760/_Far_Away/\\\" rel=\\\"noopener noreferrer\\\" target=\\\"_blank\\\" referrerpolicy=\\\"no-referrer\\\">https://store.steampowered.com/app/1250760/_Far_Away/</a><br>\\n<br>\\n<br>\\nå†²ï¼<br>\\n\",\"author\":\"453577\",\"share_code\":\"\",\"starred\":false,\"reading_time\":1,\"enclosures\":[],\"tags\":[\"æµ·æ²™é£äº‘ Far Away\"]}]}",
        "payloadType": "json",
        "x": 90,
        "y": 740,
        "wires": [
            [
                "1c6d068f286bd40d"
            ]
        ]
    },
    {
        "id": "523620a1dba7aa6e",
        "type": "change",
        "z": "384abcadb0af9821",
        "name": "ç¼–è¾‘å“åº”ä½“",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"æ— åŒ¹é…çš„RSSä¸»é¢˜\",\"type\":\"è½¬å‘å¤±è´¥\",\"sender\":\"RSSPush\",\"destination\":\"Self-Hosted Ntfy\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 500,
        "wires": [
            [
                "7859c34cc7a7adbb"
            ]
        ]
    },
    {
        "id": "7859c34cc7a7adbb",
        "type": "http response",
        "z": "384abcadb0af9821",
        "name": "è½¬å‘å®Œæˆ",
        "statusCode": "200",
        "headers": {
            "content-type": "application/json"
        },
        "x": 2080,
        "y": 500,
        "wires": []
    }
]
